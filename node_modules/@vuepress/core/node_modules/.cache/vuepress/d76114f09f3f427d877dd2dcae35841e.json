{"remainingRequest":"/root/myASUS/blog/asd/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/root/myASUS/blog/asd/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/myASUS/blog/asd/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/myASUS/blog/asd/blog/components/Toc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/myASUS/blog/asd/blog/components/Toc.vue","mtime":1652193550718},{"path":"/root/myASUS/blog/asd/blog/node_modules/cache-loader/dist/cjs.js","mtime":1651554606967},{"path":"/root/myASUS/blog/asd/blog/node_modules/babel-loader/lib/index.js","mtime":1651554606693},{"path":"/root/myASUS/blog/asd/blog/node_modules/cache-loader/dist/cjs.js","mtime":1651554606967},{"path":"/root/myASUS/blog/asd/blog/node_modules/vue-loader/lib/index.js","mtime":1651554614190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgU3RpY2tlciBmcm9tICdAdGhlbWUvY29tcG9uZW50cy9TdGlja2VyLnZ1ZSc7CnZhciBpbml0VG9wOyAvLyBnZXQgb2Zmc2V0IHRvcAoKZnVuY3Rpb24gZ2V0QWJzb2x1dGVUb3AoZG9tKSB7CiAgcmV0dXJuIGRvbSAmJiBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IDA7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTdGlja2VyOiBTdGlja2VyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlSW5kZXg6IDAsCiAgICAgIGlzU2hvdzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdmlzaWJsZTogZnVuY3Rpb24gdmlzaWJsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGZyb250bWF0dGVyICYmIHRoaXMuJGZyb250bWF0dGVyLnRvYyAhPT0gZmFsc2UgJiYgISEodGhpcy4kcGFnZSAmJiB0aGlzLiRwYWdlLmhlYWRlcnMgJiYgdGhpcy4kcGFnZS5oZWFkZXJzLmxlbmd0aCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgYWN0aXZlSW5kZXg6IGZ1bmN0aW9uIGFjdGl2ZUluZGV4KCkgewogICAgICB2YXIgaXRlbXMgPSB0aGlzLiRyZWZzLmNoYWlyVG9jSXRlbSB8fCBbXTsKICAgICAgdmFyIGRvbSA9IGl0ZW1zW3RoaXMuYWN0aXZlSW5kZXhdOwogICAgICBpZiAoIWRvbSkgcmV0dXJuOwogICAgICB2YXIgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIHdyYXBwZXJSZWN0ID0gdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHZhciB0b3AgPSByZWN0LnRvcCAtIHdyYXBwZXJSZWN0LnRvcDsKCiAgICAgIGlmICh0b3AgPCAyMCkgewogICAgICAgIHRoaXMuJGVsLnNjcm9sbFRvcCA9IHRoaXMuJGVsLnNjcm9sbFRvcCArIHRvcCAtIDIwOwogICAgICB9IGVsc2UgaWYgKHRvcCArIHJlY3QuaGVpZ2h0ID4gd3JhcHBlclJlY3QuaGVpZ2h0KSB7CiAgICAgICAgdGhpcy4kZWwuc2Nyb2xsVG9wICs9IHJlY3QudG9wIC0gKHdyYXBwZXJSZWN0LmhlaWdodCAtIHJlY3QuaGVpZ2h0KTsKICAgICAgfQogICAgfSwKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKCkge30KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJGV2ZW50QnVzLiRvbignRVZfVE9HR0xFX1RPQycsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaXNTaG93ID0gIV90aGlzLmlzU2hvdzsKICAgIH0pOyAvLyBzeW5jIHZpc2libGUgdG8gcGFyZW50IGNvbXBvbmVudAoKICAgIHZhciBzeW5jVmlzaWJsZSA9IGZ1bmN0aW9uIHN5bmNWaXNpYmxlKCkgewogICAgICBfdGhpcy4kZW1pdCgndmlzaWJsZS1jaGFuZ2UnLCBfdGhpcy52aXNpYmxlKTsKICAgIH07CgogICAgc3luY1Zpc2libGUoKTsKICAgIHRoaXMuJHdhdGNoKCd2aXNpYmxlJywgc3luY1Zpc2libGUpOyAvLyBiaW5kaW5nIGV2ZW50CgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyRXZ0KCk7CiAgICB9LCAxMDAwKTsKCiAgICB0aGlzLl9vblNjcm9sbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLm9uU2Nyb2xsKCk7CiAgICB9OwoKICAgIHRoaXMuX29uSGFzaENoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIgaW5kZXggPSAoX3RoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXSkuZmluZEluZGV4KGZ1bmN0aW9uIChoKSB7CiAgICAgICAgcmV0dXJuIGguc2x1ZyA9PT0gaGFzaDsKICAgICAgfSk7CiAgICAgIGlmIChpbmRleCA+PSAwKSBfdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB2YXIgZG9tID0gaGFzaCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKTsKICAgICAgaWYgKGRvbSkgd2luZG93LnNjcm9sbFRvKDAsIGdldEFic29sdXRlVG9wKGRvbSkgLSAyMCk7CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9vblNjcm9sbCk7IC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5fb25IYXNoQ2hhbmdlKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGwpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLl9vbkhhc2hDaGFuZ2UpOwogIH0sCiAgbWV0aG9kczogewogICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmIChpbml0VG9wID09PSB1bmRlZmluZWQpIHsKICAgICAgICBpbml0VG9wID0gZ2V0QWJzb2x1dGVUb3AodGhpcy4kZWwpOwogICAgICB9IC8vIHVwZGF0ZSBwb3NpdGlvbgoKCiAgICAgIHZhciBzY3JvbGxUb3AgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgIHZhciBoZWFkaW5ncyA9IHRoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXTsgLy8gY2hhbmdlIGFjdGl2ZSB0b2Mgd2l0aCBzY3JvbGxpbmcKCiAgICAgIHZhciBpID0gMDsKCiAgICAgIHZhciBhZGRMaW5rID0gZnVuY3Rpb24gYWRkTGluayhpbmRleCkgewogICAgICAgIF90aGlzMi5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB9OwoKICAgICAgZm9yICg7IGkgPCBoZWFkaW5ncy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoZWFkaW5nc1tpXS5zbHVnKTsKICAgICAgICB2YXIgdG9wID0gZ2V0QWJzb2x1dGVUb3AoZG9tKTsKCiAgICAgICAgaWYgKHRvcCAtIDUwIDwgc2Nyb2xsVG9wKSB7CiAgICAgICAgICBhZGRMaW5rKGkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWkpIGFkZExpbmsoaSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0cmlnZ2VyRXZ0OiBmdW5jdGlvbiB0cmlnZ2VyRXZ0KCkgewogICAgICB0aGlzLl9vblNjcm9sbCgpOwoKICAgICAgdGhpcy5fb25IYXNoQ2hhbmdlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAoBA;AACA,Y,CACA;;AACA;EACA,0CACAA,kCACAC,uBADA,GAEAA,kCAHA,GAIA,CAJA;AAKA;;AACA;EACAC;IACAC;EADA,CADA;EAIAC,IAJA,kBAIA;IACA;MACAC,cADA;MAEAC;IAFA;EAIA,CATA;EAUAC;IACAC,OADA,qBACA;MACA,OACA,qBACA,+BADA,IAEA,iEAHA;IAKA;EAPA,CAVA;EAmBAC;IACAJ,WADA,yBACA;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAbA;IAcAK,MAdA,oBAcA;EAdA,CAnBA;EAmCAC,OAnCA,qBAmCA;IAAA;;IACA;MACA;IACA,CAFA,EADA,CAIA;;IACA;MACA;IACA,CAFA;;IAGAC;IACA,oCATA,CAUA;;IACAC;MAAA;IAAA;;IACA;MAAA;IAAA;;IACA;MACA;MACA;QAAA;MAAA;MACA;MACA;MACA;IACA,CANA;;IAOAC,kDApBA,CAqBA;EACA,CAzDA;EA0DAC,aA1DA,2BA0DA;IACAD;IACAA;EACA,CA7DA;EA8DAE;IACAC,QADA,sBACA;MAAA;;MACA;QACAC;MACA,CAHA,CAIA;;;MACA,gBACAjB,4DADA;MAEA,wCAPA,CAQA;;MACA;;MACA;QACA;MACA,CAFA;;MAGA;QACA;QACA;;QACA;UACAkB;QACA,CAFA,MAEA;UACA;UACA;QACA;MACA;IACA,CAxBA;IAyBAC,UAzBA,wBAyBA;MACA;;MACA;IACA;EA5BA;AA9DA","names":["dom","document","components","Sticker","data","activeIndex","isShow","computed","visible","watch","$route","mounted","syncVisible","setTimeout","window","beforeDestroy","methods","onScroll","initTop","addLink","triggerEvt"],"sourceRoot":"components","sources":["Toc.vue"],"sourcesContent":["<template>\n  <transition name=\"collapse-transition\">\n    <Sticker v-if=\"isShow\" class=\"theme-toc\" v-bind=\"$attrs\">\n      <div\n        v-for=\"(item, index) in $page.headers\"\n        ref=\"chairTocItem\"\n        :key=\"index\"\n        class=\"theme-toc-item\"\n        :class=\"[\n          `theme-toc-h${item.level}`,\n          { active: activeIndex === index },\n        ]\"\n      >\n        <a :href=\"`#${item.slug}`\" :title=\"item.title\">{{ item.title }}</a>\n      </div>\n    </Sticker>\n  </transition>\n</template>\n\n<script>\nimport Sticker from '@theme/components/Sticker.vue'\nlet initTop\n// get offset top\nfunction getAbsoluteTop(dom) {\n  return dom && dom.getBoundingClientRect\n    ? dom.getBoundingClientRect().top +\n        document.body.scrollTop +\n        document.documentElement.scrollTop\n    : 0\n}\nexport default {\n  components: {\n    Sticker,\n  },\n  data() {\n    return {\n      activeIndex: 0,\n      isShow: false\n    }\n  },\n  computed: {\n    visible() {\n      return (\n        this.$frontmatter &&\n        this.$frontmatter.toc !== false &&\n        !!(this.$page && this.$page.headers && this.$page.headers.length)\n      )\n    },\n  },\n  watch: {\n    activeIndex() {\n      const items = this.$refs.chairTocItem || []\n      const dom = items[this.activeIndex]\n      if (!dom) return\n      const rect = dom.getBoundingClientRect()\n      const wrapperRect = this.$el.getBoundingClientRect()\n      const top = rect.top - wrapperRect.top\n      if (top < 20) {\n        this.$el.scrollTop = this.$el.scrollTop + top - 20\n      } else if (top + rect.height > wrapperRect.height) {\n        this.$el.scrollTop += rect.top - (wrapperRect.height - rect.height)\n      }\n    },\n    $route() {},\n  },\n  mounted() {\n    this.$eventBus.$on('EV_TOGGLE_TOC', () => {\n      this.isShow = !this.isShow;\n    })\n    // sync visible to parent component\n    const syncVisible = () => {\n      this.$emit('visible-change', this.visible)\n    }\n    syncVisible()\n    this.$watch('visible', syncVisible)\n    // binding event\n    setTimeout(() => this.triggerEvt(), 1000)\n    this._onScroll = () => this.onScroll()\n    this._onHashChange = () => {\n      const hash = decodeURIComponent(location.hash.substring(1))\n      const index = (this.$page.headers || []).findIndex(h => h.slug === hash)\n      if (index >= 0) this.activeIndex = index\n      const dom = hash && document.getElementById(hash)\n      if (dom) window.scrollTo(0, getAbsoluteTop(dom) - 20)\n    }\n    window.addEventListener('scroll', this._onScroll)\n    // window.addEventListener('hashchange', this._onHashChange);\n  },\n  beforeDestroy() {\n    window.removeEventListener('scroll', this._onScroll)\n    window.removeEventListener('hashchange', this._onHashChange)\n  },\n  methods: {\n    onScroll() {\n      if (initTop === undefined) {\n        initTop = getAbsoluteTop(this.$el)\n      }\n      // update position\n      const scrollTop =\n        document.body.scrollTop + document.documentElement.scrollTop\n      const headings = this.$page.headers || []\n      // change active toc with scrolling\n      let i = 0\n      const addLink = index => {\n        this.activeIndex = index\n      }\n      for (; i < headings.length; i++) {\n        const dom = document.getElementById(headings[i].slug)\n        const top = getAbsoluteTop(dom)\n        if (top - 50 < scrollTop) {\n          addLink(i)\n        } else {\n          if (!i) addLink(i)\n          break\n        }\n      }\n    },\n    triggerEvt() {\n      this._onScroll()\n      this._onHashChange()\n    },\n  },\n}\n</script>\n<style lang=\"stylus\">\n.collapse-transition-enter-active {\n  transition-duration: 378ms;\n  transform: translateX(0);\n  transition-property transform\n}\n.collapse-transition-leave-active {\n  transition: all 378ms;\n}\n.collapse-transition-enter, .collapse-transition-leave-to\n/* .collapse-transition-leave-active for below version 2.1.8 */ {\n  transform translateX(100%)\n  opacity: 0;\n}\n.table-of-contents\n  display none !important\n.theme-toc\n  opacity .9\n  text-align left\n  box-shadow: -2px 0 3px rgba(0,0,0,.1);\n  position fixed\n  height 100vh\n  max-width 252px\n  overflow-y auto\n  padding 1rem 0\n  padding-left 1px\n  width 252px\n  top 0\n  right 0\n  box-sizing border-box\n  background: var(--theme-card-background);\n  z-index 0\n  .theme-toc-item\n    position relative\n    line-height: 1.4;\n    border-left 2px solid transparent\n    overflow hidden\n    &.theme-toc-h3 a\n      padding-left 2.5em\n    &.theme-toc-h4 a\n      padding-left 3.5em\n    a\n      display block\n      padding: .5em 1em;\n      color var(--theme-foreground-color)\n      width 100%\n      box-sizing border-box\n      font-size 14px\n      font-weight 400\n      text-decoration none\n      transition color 0.3s\n      overflow hidden\n      text-overflow ellipsis\n      white-space nowrap\n    &.active\n      border-left-color var(--theme-accent-color)\n      a\n        color var(--theme-accent-color)\n    &:hover\n      a\n        color var(--theme-accent-color)\n  for i in range(3, 6)\n    .theme-toc-h{i} a\n      padding-left 1rem * (i - 2)\n</style>"]}]}